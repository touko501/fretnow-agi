<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#060B18">
  <meta name="description" content="FRETNOW â€” Plateforme de fret IA. Paiement J+1, commission 10%, matching intelligent. Transporteurs et chargeurs : inscrivez-vous gratuitement.">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta property="og:title" content="FRETNOW â€” Le fret rÃ©inventÃ©. Paiement J+1.">
  <meta property="og:description" content="58% des camions roulent Ã  vide. FRETNOW garantit le retour chargÃ© grÃ¢ce Ã  l'IA. Commission 10%, paiement J+1.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://fretnow-agi.onrender.com">
  <title>FRETNOW | Le fret rÃ©inventÃ© â€” Paiement J+1, Commission 10%</title>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=Syne:wght@700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { font-family: 'Outfit', system-ui, sans-serif; }
    :root {
      --navy: #060B18;
      --blue: #2563EB;
      --cyan: #06B6D4;
      --amber: #F59E0B;
      --green: #10B981;
      --red: #EF4444;
    }
    body { background: var(--navy); color: #E2E8F0; overflow-x: hidden; -webkit-font-smoothing: antialiased; }
    a { color: inherit; text-decoration: none; }

    /* Grain overlay */
    body::after {
      content:'';position:fixed;inset:0;pointer-events:none;z-index:9999;
      background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
    }

    /* Gradient animations */
    @keyframes gradient { 0%,100%{background-position:0% 50%} 50%{background-position:100% 50%} }
    .gradient-animate { background:linear-gradient(-45deg,#2563EB,#7c3aed,#06B6D4,#2563EB); background-size:400% 400%; animation:gradient 8s ease infinite; }
    .gradient-text { background:linear-gradient(135deg,#2563EB,#7c3aed,#06B6D4); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }

    /* Float */
    @keyframes float { 0%,100%{transform:translateY(0) rotate(0deg)} 50%{transform:translateY(-20px) rotate(2deg)} }
    .float { animation: float 6s ease-in-out infinite; }

    /* Pulse */
    @keyframes pulse-ring { 0%{transform:scale(0.8);opacity:1} 100%{transform:scale(1.5);opacity:0} }

    /* Glow */
    .glow { box-shadow: 0 0 40px rgba(37,99,235,0.3); }

    /* Glass */
    .glass { background:rgba(255,255,255,0.03); backdrop-filter:blur(20px); border:1px solid rgba(255,255,255,0.05); }

    /* Hero BG */
    .hero-bg {
      background:
        radial-gradient(ellipse at 20% 50%, rgba(37,99,235,0.15) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 20%, rgba(124,58,237,0.15) 0%, transparent 50%),
        radial-gradient(ellipse at 50% 100%, rgba(6,182,212,0.1) 0%, transparent 50%);
    }

    /* Feature card hover */
    .feature-card { transition: all 0.3s ease; }
    .feature-card:hover { transform:translateY(-5px); box-shadow:0 20px 40px rgba(37,99,235,0.2); }

    /* Button shine */
    .btn-primary { position:relative; overflow:hidden; }
    .btn-primary::before { content:''; position:absolute; inset:0; background:linear-gradient(45deg,transparent,rgba(255,255,255,0.2),transparent); transform:translateX(-100%); transition:transform 0.5s; }
    .btn-primary:hover::before { transform:translateX(100%); }

    /* Scroll indicator */
    @keyframes scroll { 0%,100%{transform:translateY(0);opacity:1} 50%{transform:translateY(8px);opacity:0.5} }
    .scroll-indicator { animation: scroll 2s ease-in-out infinite; }

    /* Marquee */
    @keyframes marquee { 0%{transform:translateX(0)} 100%{transform:translateX(-50%)} }
    .marquee-track { display:flex; animation:marquee 30s linear infinite; width:max-content; }
    .marquee-track:hover { animation-play-state: paused; }

    /* Form */
    input:focus, select:focus { outline:none; border-color:var(--cyan); box-shadow:0 0 0 3px rgba(6,182,212,0.2); }

    /* Syne for titles */
    .font-syne { font-family: 'Syne', sans-serif; }

    /* Responsive */
    @media (max-width: 768px) { .hero-title { font-size: 2.5rem !important; } }

    /* Fade in */
    @keyframes fadeIn { from{opacity:0;transform:translateY(-10px)} to{opacity:1;transform:translateY(0)} }
    .animate-fadeIn { animation: fadeIn 0.3s ease-out; }

    /* Counter */
    .live-dot { width:8px;height:8px;border-radius:50%;background:#10B981;display:inline-block;margin-right:6px; animation:pulse-ring 2s ease-out infinite; }
  </style>
</head>
<body>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• NAVIGATION â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <nav class="fixed top-0 left-0 right-0 z-50 glass">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="#" class="flex items-center gap-2">
        <div class="w-10 h-10 rounded-xl gradient-animate flex items-center justify-center font-bold text-lg">F</div>
        <span class="font-bold text-xl font-syne">FRET<span class="text-amber-400">NOW</span></span>
      </a>
      <div class="hidden md:flex items-center gap-8">
        <a href="#probleme" class="text-sm text-gray-300 hover:text-white transition">Le problÃ¨me</a>
        <a href="#avantages" class="text-sm text-gray-300 hover:text-white transition">Avantages</a>
        <a href="#comment" class="text-sm text-gray-300 hover:text-white transition">Comment Ã§a marche</a>
        <a href="#tarifs" class="text-sm text-gray-300 hover:text-white transition">Tarifs</a>
      </div>
      <div class="flex items-center gap-3">
        <a href="/app.html" class="hidden sm:block text-sm text-gray-300 hover:text-white transition">Connexion</a>
        <a href="#inscription" class="btn-primary gradient-animate px-5 py-2.5 rounded-xl text-sm font-semibold hover:opacity-90 transition">
          S'inscrire gratuitement
        </a>
      </div>
    </div>
  </nav>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HERO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="min-h-screen hero-bg flex items-center pt-20 pb-12 px-4">
    <div class="max-w-7xl mx-auto w-full">
      <div class="grid lg:grid-cols-2 gap-12 items-center">
        <!-- Left -->
        <div class="text-center lg:text-left">
          <div class="inline-flex items-center gap-2 glass px-4 py-2 rounded-full mb-6">
            <span class="relative flex h-2 w-2">
              <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
              <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
            </span>
            <span class="text-sm">ğŸš€ Lancement â€” <strong id="spotsCount">47</strong> places gratuites restantes</span>
          </div>

          <h1 class="hero-title text-5xl md:text-6xl lg:text-7xl font-black leading-tight mb-6 font-syne">
            Fini les retours<br>
            <span class="gradient-text">Ã  vide.</span><br>
            <span class="text-gray-400">Paiement J+1.</span>
          </h1>

          <p class="text-xl text-gray-400 mb-8 max-w-lg mx-auto lg:mx-0">
            La plateforme de fret propulsÃ©e par l'<strong class="text-white">IA</strong> qui
            <strong class="text-white">garantit le retour chargÃ©</strong>,
            avec seulement <strong class="text-white">10% de commission</strong>.
          </p>

          <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start mb-10">
            <a href="#inscription" class="btn-primary gradient-animate px-8 py-4 rounded-2xl text-lg font-bold hover:opacity-90 transition glow text-center">
              ğŸš› Rejoindre FRETNOW â†’
            </a>
            <a href="#comment" class="glass px-8 py-4 rounded-2xl text-lg font-medium hover:bg-white/10 transition flex items-center justify-center gap-2">
              <span>â–¶</span> DÃ©couvrir
            </a>
          </div>

          <div class="grid grid-cols-4 gap-4">
            <div class="text-center">
              <div class="text-2xl md:text-3xl font-bold gradient-text">J+1</div>
              <div class="text-xs text-gray-500">Paiement</div>
            </div>
            <div class="text-center">
              <div class="text-2xl md:text-3xl font-bold gradient-text">10%</div>
              <div class="text-xs text-gray-500">Commission</div>
            </div>
            <div class="text-center">
              <div class="text-2xl md:text-3xl font-bold gradient-text">CNR</div>
              <div class="text-xs text-gray-500">Prix rÃ©fÃ©rence</div>
            </div>
            <div class="text-center">
              <div class="text-2xl md:text-3xl font-bold gradient-text">0â‚¬</div>
              <div class="text-xs text-gray-500">Inscription</div>
            </div>
          </div>
        </div>

        <!-- Right: Phone mockup -->
        <div class="relative hidden lg:block">
          <div class="relative mx-auto w-[300px] float">
            <div class="glass rounded-[40px] p-4 glow">
              <div class="bg-gray-900 rounded-[32px] p-4 min-h-[500px]">
                <div class="flex items-center justify-between mb-6">
                  <div>
                    <p class="text-xs text-gray-500">Bonjour, Marc ğŸ‘‹</p>
                    <p class="font-bold">Vos missions</p>
                  </div>
                  <div class="w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-sm font-bold">M</div>
                </div>
                <div class="grid grid-cols-2 gap-3 mb-6">
                  <div class="glass rounded-xl p-3">
                    <p class="text-2xl font-bold text-green-400">12 450â‚¬</p>
                    <p class="text-xs text-gray-500">Ce mois</p>
                  </div>
                  <div class="glass rounded-xl p-3">
                    <p class="text-2xl font-bold text-cyan-400">8</p>
                    <p class="text-xs text-gray-500">Missions</p>
                  </div>
                </div>
                <div class="glass rounded-xl p-4 mb-3">
                  <div class="flex justify-between items-start mb-3">
                    <div>
                      <p class="font-semibold text-sm">Paris â†’ Lyon</p>
                      <p class="text-xs text-gray-500">465 km Â· PL Â· Frigo</p>
                    </div>
                    <div class="text-right">
                      <p class="font-bold text-green-400">1 450â‚¬</p>
                      <p class="text-xs text-green-400/70">J+1 garanti</p>
                    </div>
                  </div>
                  <button class="w-full bg-gradient-to-r from-cyan-500 to-blue-600 py-2 rounded-lg text-sm font-semibold">Accepter la mission</button>
                </div>
                <div class="glass rounded-xl p-4 mb-3 opacity-70">
                  <div class="flex justify-between items-start">
                    <div>
                      <p class="font-semibold text-sm">Marseille â†’ Bordeaux</p>
                      <p class="text-xs text-gray-500">650 km Â· SPL Â· BÃ¢chÃ©</p>
                    </div>
                    <div class="text-right"><p class="font-bold">2 100â‚¬</p></div>
                  </div>
                </div>
                <div class="glass rounded-xl p-4 opacity-40">
                  <div class="flex justify-between items-start">
                    <div>
                      <p class="font-semibold text-sm">Lille â†’ Strasbourg</p>
                      <p class="text-xs text-gray-500">520 km Â· PL Â· Taut</p>
                    </div>
                    <div class="text-right"><p class="font-bold">1 780â‚¬</p></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="absolute -top-10 -right-10 w-32 h-32 rounded-full bg-gradient-to-br from-purple-500/20 to-pink-500/20 blur-2xl"></div>
          <div class="absolute -bottom-10 -left-10 w-40 h-40 rounded-full bg-gradient-to-br from-cyan-500/20 to-blue-500/20 blur-2xl"></div>
        </div>
      </div>

      <div class="absolute bottom-8 left-1/2 -translate-x-1/2 scroll-indicator hidden md:block">
        <div class="w-6 h-10 rounded-full border-2 border-gray-600 flex justify-center pt-2">
          <div class="w-1 h-2 bg-gray-400 rounded-full"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MARQUEE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="py-4 border-y border-white/5 overflow-hidden">
    <div class="marquee-track">
      <span class="px-6 text-sm text-gray-400 whitespace-nowrap">âš¡ Paiement J+1</span>
      <span class="px-6 text-sm text-gray-400 whitespace-nowrap">ğŸ¤– 8 Agents IA</span>
      <span class="px-6 text-sm text-gray-400 whitespace-nowrap">ğŸ’° Commission 10%</span>
      <span class="px-6 text-sm text-gray-400 whitespace-nowrap">ğŸ“ Tracking GPS</span>
      <span class="px-6 text-sm text-gray-400 whitespace-nowrap">ğŸ“Š Prix CNR</span>
      <span class="px-6 text-sm text-gray-400 whitespace-nowrap">ğŸš› Retour chargÃ© garanti</span>
      <span class="px-6 text-sm text-gray-400 whitespace-nowrap">ğŸ”’ Escrow sÃ©curisÃ©</span>
      <span class="px-6 text-sm text-gray-400 whitespace-nowrap">ğŸ‡«ğŸ‡· Made in France</span>
      <span class="px-6 text-sm text-gray-400 whitespace-nowrap">ğŸŒ± Certificat COâ‚‚</span>
      <span class="px-6 text-sm text-gray-400 whitespace-nowrap">âš¡ Paiement J+1</span>
      <span class="px-6 text-sm text-gray-400 whitespace-nowrap">ğŸ¤– 8 Agents IA</span>
      <span class="px-6 text-sm text-gray-400 whitespace-nowrap">ğŸ’° Commission 10%</span>
      <span class="px-6 text-sm text-gray-400 whitespace-nowrap">ğŸ“ Tracking GPS</span>
      <span class="px-6 text-sm text-gray-400 whitespace-nowrap">ğŸ“Š Prix CNR</span>
      <span class="px-6 text-sm text-gray-400 whitespace-nowrap">ğŸš› Retour chargÃ© garanti</span>
      <span class="px-6 text-sm text-gray-400 whitespace-nowrap">ğŸ”’ Escrow sÃ©curisÃ©</span>
      <span class="px-6 text-sm text-gray-400 whitespace-nowrap">ğŸ‡«ğŸ‡· Made in France</span>
      <span class="px-6 text-sm text-gray-400 whitespace-nowrap">ğŸŒ± Certificat COâ‚‚</span>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PROBLEM â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="probleme" class="py-20 px-4">
    <div class="max-w-5xl mx-auto text-center">
      <div class="inline-block px-4 py-1 rounded-full glass text-sm text-red-400 mb-6">âš ï¸ Le constat</div>
      <h2 class="text-3xl md:text-5xl font-black mb-6 font-syne">
        Le transport routier<br>est <span class="text-red-400">en crise</span>.
      </h2>
      <p class="text-xl text-gray-400 mb-12 max-w-3xl mx-auto">
        400 000 entreprises de transport en France. 88% des marchandises passent par la route.
        Et le systÃ¨me les Ã©trangle.
      </p>

      <div class="grid md:grid-cols-4 gap-6">
        <div class="glass rounded-2xl p-6 text-center">
          <div class="text-5xl font-black text-red-400 mb-2">58%</div>
          <p class="text-gray-400 text-sm">Des camions roulent Ã  vide au retour</p>
        </div>
        <div class="glass rounded-2xl p-6 text-center">
          <div class="text-5xl font-black text-red-400 mb-2">90j</div>
          <p class="text-gray-400 text-sm">DÃ©lai de paiement moyen</p>
        </div>
        <div class="glass rounded-2xl p-6 text-center">
          <div class="text-5xl font-black text-red-400 mb-2">25%</div>
          <p class="text-gray-400 text-sm">Commission des courtiers</p>
        </div>
        <div class="glass rounded-2xl p-6 text-center">
          <div class="text-5xl font-black text-red-400 mb-2">80Md</div>
          <p class="text-gray-400 text-sm">$ de pertes mondiales / an</p>
        </div>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DUAL VALUE PROP â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="py-20 px-4 hero-bg">
    <div class="max-w-7xl mx-auto">
      <div class="text-center mb-16">
        <div class="inline-block px-4 py-1 rounded-full glass text-sm text-cyan-400 mb-6">ğŸ¯ Pour qui ?</div>
        <h2 class="text-3xl md:text-5xl font-black mb-4 font-syne">
          Deux mÃ©tiers. <span class="gradient-text">Une plateforme.</span>
        </h2>
      </div>

      <div class="grid md:grid-cols-2 gap-8">
        <!-- Transporteurs -->
        <div class="glass rounded-3xl p-8 hover:border-cyan-500/30 transition-all duration-300">
          <div class="text-5xl mb-4">ğŸš›</div>
          <h3 class="text-2xl font-bold mb-4 text-cyan-400">Transporteurs</h3>
          <p class="text-gray-400 mb-6">Plus de retour Ã  vide, plus d'impayÃ©s, plus de courses au moins-disant.</p>
          <ul class="space-y-3">
            <li class="flex items-start gap-3"><span class="text-green-400 mt-1">âœ“</span><span class="text-gray-300"><strong class="text-white">Retour chargÃ© garanti</strong> â€” L'IA trouve le fret sur votre trajet retour</span></li>
            <li class="flex items-start gap-3"><span class="text-green-400 mt-1">âœ“</span><span class="text-gray-300"><strong class="text-white">Paiement J+1</strong> â€” LivrÃ© aujourd'hui, payÃ© demain via escrow</span></li>
            <li class="flex items-start gap-3"><span class="text-green-400 mt-1">âœ“</span><span class="text-gray-300"><strong class="text-white">Prix CNR</strong> â€” Tarifs basÃ©s sur les rÃ©fÃ©rentiels officiels</span></li>
            <li class="flex items-start gap-3"><span class="text-green-400 mt-1">âœ“</span><span class="text-gray-300"><strong class="text-white">ZÃ©ro paperasse</strong> â€” Documents gÃ©nÃ©rÃ©s automatiquement</span></li>
          </ul>
          <a href="#inscription" class="block mt-8 text-center btn-primary bg-gradient-to-r from-cyan-500 to-blue-600 px-6 py-3 rounded-xl font-semibold">
            Inscrire ma flotte â†’
          </a>
        </div>

        <!-- Chargeurs -->
        <div class="glass rounded-3xl p-8 hover:border-amber-500/30 transition-all duration-300">
          <div class="text-5xl mb-4">ğŸ“¦</div>
          <h3 class="text-2xl font-bold mb-4 text-amber-400">Chargeurs / ExpÃ©diteurs</h3>
          <p class="text-gray-400 mb-6">ExpÃ©diez en toute confiance, suivez en temps rÃ©el, payez au juste prix.</p>
          <ul class="space-y-3">
            <li class="flex items-start gap-3"><span class="text-green-400 mt-1">âœ“</span><span class="text-gray-300"><strong class="text-white">Matching intelligent</strong> â€” Le bon transporteur pour chaque envoi</span></li>
            <li class="flex items-start gap-3"><span class="text-green-400 mt-1">âœ“</span><span class="text-gray-300"><strong class="text-white">Tracking GPS live</strong> â€” Suivez votre marchandise en temps rÃ©el</span></li>
            <li class="flex items-start gap-3"><span class="text-green-400 mt-1">âœ“</span><span class="text-gray-300"><strong class="text-white">Escrow sÃ©curisÃ©</strong> â€” L'argent est protÃ©gÃ© jusqu'Ã  la livraison</span></li>
            <li class="flex items-start gap-3"><span class="text-green-400 mt-1">âœ“</span><span class="text-gray-300"><strong class="text-white">Certificat COâ‚‚</strong> â€” Empreinte carbone calculÃ©e automatiquement</span></li>
          </ul>
          <a href="#inscription" class="block mt-8 text-center btn-primary bg-gradient-to-r from-amber-500 to-orange-600 px-6 py-3 rounded-xl font-semibold">
            Poster une mission â†’
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FEATURES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="avantages" class="py-20 px-4">
    <div class="max-w-7xl mx-auto">
      <div class="text-center mb-16">
        <div class="inline-block px-4 py-1 rounded-full glass text-sm text-green-400 mb-6">ğŸ¤– La technologie</div>
        <h2 class="text-3xl md:text-5xl font-black mb-4 font-syne">
          8 agents IA <span class="gradient-text">Ã  votre service</span>
        </h2>
        <p class="text-xl text-gray-400">La puissance de l'intelligence artificielle au service du transport</p>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
        <div class="feature-card glass rounded-2xl p-5">
          <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center text-xl mb-3">ğŸ”—</div>
          <h3 class="font-bold mb-1">MatchingAgent</h3>
          <p class="text-gray-400 text-sm">Trouve le transporteur idÃ©al en 30 secondes</p>
        </div>
        <div class="feature-card glass rounded-2xl p-5">
          <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center text-xl mb-3">ğŸ’°</div>
          <h3 class="font-bold mb-1">PricingAgent</h3>
          <p class="text-gray-400 text-sm">Prix CNR + gasoil + pÃ©ages en temps rÃ©el</p>
        </div>
        <div class="feature-card glass rounded-2xl p-5">
          <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center text-xl mb-3">ğŸ“¡</div>
          <h3 class="font-bold mb-1">LeadGenAgent</h3>
          <p class="text-gray-400 text-sm">DÃ©tecte les opportunitÃ©s de fret en continu</p>
        </div>
        <div class="feature-card glass rounded-2xl p-5">
          <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center text-xl mb-3">ğŸ’¬</div>
          <h3 class="font-bold mb-1">CommAgent</h3>
          <p class="text-gray-400 text-sm">Communication automatisÃ©e transporteur-chargeur</p>
        </div>
        <div class="feature-card glass rounded-2xl p-5">
          <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-rose-500 to-red-600 flex items-center justify-center text-xl mb-3">ğŸ¯</div>
          <h3 class="font-bold mb-1">ConversionAgent</h3>
          <p class="text-gray-400 text-sm">Transforme les prospects en clients actifs</p>
        </div>
        <div class="feature-card glass rounded-2xl p-5">
          <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-500 to-amber-600 flex items-center justify-center text-xl mb-3">ğŸ›¡ï¸</div>
          <h3 class="font-bold mb-1">RiskAgent</h3>
          <p class="text-gray-400 text-sm">Ã‰value la fiabilitÃ© des partenaires</p>
        </div>
        <div class="feature-card glass rounded-2xl p-5">
          <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-indigo-500 to-violet-600 flex items-center justify-center text-xl mb-3">ğŸ”®</div>
          <h3 class="font-bold mb-1">PredictionAgent</h3>
          <p class="text-gray-400 text-sm">Anticipe la demande et optimise les routes</p>
        </div>
        <div class="feature-card glass rounded-2xl p-5">
          <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-teal-500 to-cyan-600 flex items-center justify-center text-xl mb-3">ğŸ“Š</div>
          <h3 class="font-bold mb-1">AnalyticsAgent</h3>
          <p class="text-gray-400 text-sm">Tableau de bord intelligent en temps rÃ©el</p>
        </div>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HOW IT WORKS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="comment" class="py-20 px-4 hero-bg">
    <div class="max-w-5xl mx-auto">
      <div class="text-center mb-16">
        <div class="inline-block px-4 py-1 rounded-full glass text-sm text-cyan-400 mb-6">âš¡ Simple</div>
        <h2 class="text-3xl md:text-5xl font-black mb-4 font-syne">3 Ã©tapes, 5 minutes</h2>
      </div>

      <div class="relative">
        <div class="absolute left-1/2 top-0 bottom-0 w-0.5 bg-gradient-to-b from-cyan-500 via-purple-500 to-green-500 hidden md:block"></div>
        <div class="space-y-16">
          <div class="flex flex-col md:flex-row items-center gap-8">
            <div class="md:w-1/2 md:text-right">
              <h3 class="text-2xl font-bold mb-2">1. Inscrivez-vous</h3>
              <p class="text-gray-400">SIRET vÃ©rifiÃ© automatiquement, profil crÃ©Ã© en 2 minutes. Gratuit, sans engagement.</p>
            </div>
            <div class="hidden md:flex items-center justify-center w-14 h-14 rounded-full gradient-animate text-xl font-bold relative z-10 glow">1</div>
            <div class="md:w-1/2"></div>
          </div>
          <div class="flex flex-col md:flex-row items-center gap-8">
            <div class="md:w-1/2"></div>
            <div class="hidden md:flex items-center justify-center w-14 h-14 rounded-full gradient-animate text-xl font-bold relative z-10 glow">2</div>
            <div class="md:w-1/2">
              <h3 class="text-2xl font-bold mb-2">2. L'IA fait le travail</h3>
              <p class="text-gray-400">Matching automatique chargeur â†” transporteur. Prix calculÃ© selon CNR + conditions rÃ©elles. Notifications instantanÃ©es.</p>
            </div>
          </div>
          <div class="flex flex-col md:flex-row items-center gap-8">
            <div class="md:w-1/2 md:text-right">
              <h3 class="text-2xl font-bold mb-2">3. Livrez et encaissez</h3>
              <p class="text-gray-400">Mission validÃ©e = paiement J+1 garanti via escrow. L'argent est sÃ©curisÃ© dÃ¨s la confirmation.</p>
            </div>
            <div class="hidden md:flex items-center justify-center w-14 h-14 rounded-full gradient-animate text-xl font-bold relative z-10 glow">3</div>
            <div class="md:w-1/2"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• COMPARISON TABLE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="tarifs" class="py-20 px-4">
    <div class="max-w-5xl mx-auto">
      <div class="text-center mb-16">
        <h2 class="text-3xl md:text-5xl font-black mb-4 font-syne">Comparez et <span class="gradient-text">dÃ©cidez</span></h2>
        <p class="text-xl text-gray-400">FRETNOW vs les bourses traditionnelles</p>
      </div>

      <div class="glass rounded-3xl overflow-hidden">
        <div class="overflow-x-auto">
          <table class="w-full min-w-[500px]">
            <thead>
              <tr class="border-b border-gray-800">
                <th class="p-5 text-left text-gray-400 text-sm"></th>
                <th class="p-5 text-center text-gray-400 text-sm">Courtiers traditionnels</th>
                <th class="p-5 text-center gradient-animate rounded-t-xl">
                  <span class="font-bold text-lg">FRETNOW</span>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr class="border-b border-gray-800/50">
                <td class="p-5 text-gray-300">DÃ©lai de paiement</td>
                <td class="p-5 text-center text-red-400 font-medium">60-90 jours</td>
                <td class="p-5 text-center text-green-400 font-bold text-lg">J+1 âš¡</td>
              </tr>
              <tr class="border-b border-gray-800/50">
                <td class="p-5 text-gray-300">Commission</td>
                <td class="p-5 text-center text-red-400 font-medium">20-25%</td>
                <td class="p-5 text-center text-green-400 font-bold text-lg">10%</td>
              </tr>
              <tr class="border-b border-gray-800/50">
                <td class="p-5 text-gray-300">Tarification</td>
                <td class="p-5 text-center text-gray-400">NÃ©gociÃ©e Ã  la baisse</td>
                <td class="p-5 text-center text-green-400 font-bold">CNR officiel</td>
              </tr>
              <tr class="border-b border-gray-800/50">
                <td class="p-5 text-gray-300">Inscription</td>
                <td class="p-5 text-center text-gray-400">Payante (500-2000â‚¬/an)</td>
                <td class="p-5 text-center text-green-400 font-bold">Gratuite</td>
              </tr>
              <tr class="border-b border-gray-800/50">
                <td class="p-5 text-gray-300">Tracking GPS</td>
                <td class="p-5 text-center text-gray-400">Option payante</td>
                <td class="p-5 text-center text-green-400 font-bold">Inclus</td>
              </tr>
              <tr class="border-b border-gray-800/50">
                <td class="p-5 text-gray-300">Matching IA</td>
                <td class="p-5 text-center text-red-400">âŒ</td>
                <td class="p-5 text-center text-green-400 font-bold">âœ“ 8 agents</td>
              </tr>
              <tr class="border-b border-gray-800/50">
                <td class="p-5 text-gray-300">Escrow sÃ©curisÃ©</td>
                <td class="p-5 text-center text-red-400">âŒ</td>
                <td class="p-5 text-center text-green-400 font-bold">âœ“</td>
              </tr>
              <tr>
                <td class="p-5 text-gray-300">Certificat COâ‚‚</td>
                <td class="p-5 text-center text-red-400">âŒ</td>
                <td class="p-5 text-center text-green-400 font-bold">âœ“ Auto</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• REGISTRATION FORM â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section id="inscription" class="py-20 px-4 hero-bg">
    <div class="max-w-xl mx-auto">
      <div class="text-center mb-10">
        <h2 class="text-3xl md:text-4xl font-black mb-4 font-syne">Rejoignez <span class="gradient-text">FRETNOW</span></h2>
        <p class="text-gray-400">Les <strong class="text-white" id="spotsCount2">47</strong> premiers inscrits bÃ©nÃ©ficient de <strong class="text-green-400">3 mois gratuits</strong> !</p>
      </div>

      <div class="glass rounded-3xl p-8">
        <form id="registrationForm" class="space-y-5">
          <!-- Type selection -->
          <div>
            <label class="block text-sm text-gray-400 mb-2">Vous Ãªtes</label>
            <div class="grid grid-cols-2 gap-4">
              <button type="button" class="type-btn glass rounded-xl p-4 text-center hover:bg-white/10 transition border-2 border-transparent" data-type="TRANSPORTEUR">
                <span class="text-3xl block mb-2">ğŸš›</span>
                <span class="font-semibold">Transporteur</span>
                <span class="block text-xs text-gray-500">Je propose mes camions</span>
              </button>
              <button type="button" class="type-btn glass rounded-xl p-4 text-center hover:bg-white/10 transition border-2 border-transparent" data-type="CHARGEUR">
                <span class="text-3xl block mb-2">ğŸ“¦</span>
                <span class="font-semibold">Chargeur</span>
                <span class="block text-xs text-gray-500">J'expÃ©die des marchandises</span>
              </button>
            </div>
            <input type="hidden" name="role" id="userRole">
          </div>

          <!-- Company search -->
          <div>
            <label class="block text-sm text-gray-400 mb-2">ğŸ” Rechercher votre entreprise <span class="text-cyan-400">(nom ou SIRET)</span></label>
            <div id="company-search-container"></div>
          </div>

          <!-- SIRET -->
          <div>
            <label class="block text-sm text-gray-400 mb-2">SIRET <span class="text-cyan-400">(vÃ©rifiÃ© automatiquement)</span></label>
            <div id="siret-input-container"></div>
          </div>

          <!-- Nom & PrÃ©nom -->
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm text-gray-400 mb-2">PrÃ©nom</label>
              <input type="text" name="firstName" required class="w-full bg-white/5 border border-gray-700 rounded-xl px-4 py-3 transition" placeholder="Votre prÃ©nom">
            </div>
            <div>
              <label class="block text-sm text-gray-400 mb-2">Nom</label>
              <input type="text" name="lastName" required class="w-full bg-white/5 border border-gray-700 rounded-xl px-4 py-3 transition" placeholder="Votre nom">
            </div>
          </div>

          <!-- Email -->
          <div>
            <label class="block text-sm text-gray-400 mb-2">Email professionnel</label>
            <input type="email" name="email" required class="w-full bg-white/5 border border-gray-700 rounded-xl px-4 py-3 transition" placeholder="contact@entreprise.fr">
          </div>

          <!-- Phone -->
          <div>
            <label class="block text-sm text-gray-400 mb-2">TÃ©lÃ©phone</label>
            <input type="tel" name="phone" required class="w-full bg-white/5 border border-gray-700 rounded-xl px-4 py-3 transition" placeholder="+33 6 12 34 56 78">
          </div>

          <!-- Password -->
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm text-gray-400 mb-2">Mot de passe</label>
              <input type="password" name="password" required minlength="8" class="w-full bg-white/5 border border-gray-700 rounded-xl px-4 py-3 transition" placeholder="Min. 8 caractÃ¨res">
            </div>
            <div>
              <label class="block text-sm text-gray-400 mb-2">Confirmer</label>
              <input type="password" name="passwordConfirm" required class="w-full bg-white/5 border border-gray-700 rounded-xl px-4 py-3 transition" placeholder="Confirmer">
            </div>
          </div>

          <!-- Vehicles (transporters only) -->
          <div id="vehiclesField" class="hidden">
            <label class="block text-sm text-gray-400 mb-2">Nombre de vÃ©hicules</label>
            <select name="vehicles" class="w-full bg-white/5 border border-gray-700 rounded-xl px-4 py-3 transition bg-gray-900">
              <option value="1-5">1 Ã  5 vÃ©hicules</option>
              <option value="6-15">6 Ã  15 vÃ©hicules</option>
              <option value="16-50">16 Ã  50 vÃ©hicules</option>
              <option value="50+">Plus de 50 vÃ©hicules</option>
            </select>
          </div>

          <!-- Error message -->
          <div id="formError" class="hidden p-3 bg-red-500/10 border border-red-500/30 rounded-xl text-red-400 text-sm"></div>

          <!-- Submit -->
          <button type="submit" id="submitBtn" class="w-full btn-primary gradient-animate py-4 rounded-xl font-bold text-lg hover:opacity-90 transition">
            CrÃ©er mon compte gratuitement â†’
          </button>

          <p class="text-center text-sm text-gray-500">
            DÃ©jÃ  inscrit ? <a href="/app.html" class="text-cyan-400 hover:underline">Se connecter</a>
          </p>
        </form>

        <!-- Success -->
        <div id="successMessage" class="hidden text-center py-8">
          <div class="text-6xl mb-4">ğŸ‰</div>
          <h3 class="text-2xl font-bold mb-2">Bienvenue sur FRETNOW !</h3>
          <p class="text-gray-400 mb-6">Votre compte a Ã©tÃ© crÃ©Ã© avec succÃ¨s.</p>
          <a href="/app.html" class="btn-primary gradient-animate px-8 py-4 rounded-xl font-bold text-lg inline-block">
            AccÃ©der Ã  la plateforme â†’
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FOOTER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <footer class="py-12 px-4 border-t border-gray-800">
    <div class="max-w-7xl mx-auto">
      <div class="grid md:grid-cols-4 gap-8 mb-8">
        <div>
          <div class="flex items-center gap-2 mb-4">
            <div class="w-10 h-10 rounded-xl gradient-animate flex items-center justify-center font-bold">F</div>
            <span class="font-bold text-xl font-syne">FRET<span class="text-amber-400">NOW</span></span>
          </div>
          <p class="text-sm text-gray-400">Plateforme de fret propulsÃ©e par l'IA.<br>Paiement J+1. Commission 10%.</p>
        </div>
        <div>
          <h4 class="font-semibold mb-4">Plateforme</h4>
          <ul class="space-y-2 text-sm text-gray-400">
            <li><a href="#avantages" class="hover:text-white transition">Avantages</a></li>
            <li><a href="#tarifs" class="hover:text-white transition">Tarifs</a></li>
            <li><a href="#inscription" class="hover:text-white transition">S'inscrire</a></li>
            <li><a href="/app.html" class="hover:text-white transition">Connexion</a></li>
          </ul>
        </div>
        <div>
          <h4 class="font-semibold mb-4">Solutions</h4>
          <ul class="space-y-2 text-sm text-gray-400">
            <li><a href="#" class="hover:text-white transition">Pour les transporteurs</a></li>
            <li><a href="#" class="hover:text-white transition">Pour les chargeurs</a></li>
            <li><a href="#" class="hover:text-white transition">API & IntÃ©grations</a></li>
          </ul>
        </div>
        <div>
          <h4 class="font-semibold mb-4">LÃ©gal</h4>
          <ul class="space-y-2 text-sm text-gray-400">
            <li><a href="#" class="hover:text-white transition">CGU</a></li>
            <li><a href="#" class="hover:text-white transition">Politique de confidentialitÃ©</a></li>
            <li><a href="#" class="hover:text-white transition">Mentions lÃ©gales</a></li>
          </ul>
        </div>
      </div>
      <div class="pt-8 border-t border-gray-800 flex flex-col md:flex-row justify-between items-center gap-4">
        <p class="text-sm text-gray-500">Â© 2026 FRETNOW AGI â€” Tous droits rÃ©servÃ©s.</p>
        <div class="flex gap-4">
          <a href="#" class="text-gray-400 hover:text-white transition">LinkedIn</a>
          <a href="#" class="text-gray-400 hover:text-white transition">Instagram</a>
          <a href="https://t.me/Fretnow_bot" class="text-gray-400 hover:text-white transition">Telegram</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• LIVE COUNTER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="fixed bottom-4 left-4 z-40 glass rounded-full px-4 py-2 text-sm flex items-center gap-2">
    <span class="live-dot"></span>
    <span><strong id="liveCount">3</strong> utilisateurs en ligne</span>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• REACT COMPONENTS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    // â•â•â• COMPANY SEARCH (API Recherche Entreprises - GRATUIT) â•â•â•
    const CompanySearch = () => {
      const [query, setQuery] = React.useState('');
      const [suggestions, setSuggestions] = React.useState([]);
      const [isLoading, setIsLoading] = React.useState(false);
      const [showSuggestions, setShowSuggestions] = React.useState(false);
      const [selectedCompany, setSelectedCompany] = React.useState(null);
      const [selectedIndex, setSelectedIndex] = React.useState(-1);
      const debounceRef = React.useRef(null);

      const searchCompanies = async (q) => {
        if (q.length < 2) { setSuggestions([]); return; }
        setIsLoading(true);
        try {
          const response = await fetch(`https://recherche-entreprises.api.gouv.fr/search?q=${encodeURIComponent(q)}&per_page=5&etat_administratif=A`);
          const data = await response.json();
          setSuggestions((data.results || []).map(c => ({
            siren: c.siren,
            siret: c.siege?.siret,
            name: c.nom_complet,
            activity: c.libelle_activite_principale,
            city: c.siege?.libelle_commune,
            postcode: c.siege?.code_postal,
            address: c.siege?.adresse,
            isTransport: ['49.41','49.42','52.29'].some(code => c.activite_principale?.startsWith(code.replace('.','')))
          })));
        } catch(e) { setSuggestions([]); }
        setIsLoading(false);
      };

      const handleChange = (e) => {
        setQuery(e.target.value); setSelectedIndex(-1); setSelectedCompany(null);
        if (debounceRef.current) clearTimeout(debounceRef.current);
        debounceRef.current = setTimeout(() => searchCompanies(e.target.value), 400);
      };

      const handleSelect = (company) => {
        setQuery(company.name); setSuggestions([]); setShowSuggestions(false); setSelectedCompany(company);
        const siretInput = document.querySelector('input[name="siret"]');
        if (siretInput && company.siret) {
          const formatted = company.siret.replace(/(\d{3})(\d{3})(\d{3})(\d{5})/, '$1 $2 $3 $4');
          siretInput.value = formatted;
          siretInput.dispatchEvent(new Event('input', { bubbles: true }));
        }
        window.selectedCompany = company;
      };

      const handleKeyDown = (e) => {
        if (e.key === 'ArrowDown') { e.preventDefault(); setSelectedIndex(i => Math.min(i+1, suggestions.length-1)); }
        else if (e.key === 'ArrowUp') { e.preventDefault(); setSelectedIndex(i => Math.max(i-1, 0)); }
        else if (e.key === 'Enter' && selectedIndex >= 0) { e.preventDefault(); handleSelect(suggestions[selectedIndex]); }
        else if (e.key === 'Escape') { setShowSuggestions(false); }
      };

      const clearSelection = () => { setQuery(''); setSelectedCompany(null); window.selectedCompany = null; };

      return (
        <div className="relative">
          {!selectedCompany ? (
            <>
              <input type="text" value={query} onChange={handleChange}
                onFocus={() => setShowSuggestions(true)}
                onBlur={() => setTimeout(() => setShowSuggestions(false), 200)}
                onKeyDown={handleKeyDown}
                placeholder="Ex: Geodis, DB Schenker, 12345678901234..."
                className="w-full bg-white/5 border border-gray-700 rounded-xl px-4 py-3 pr-10 transition focus:border-cyan-500 focus:outline-none focus:ring-2 focus:ring-cyan-500/20"
                autoComplete="off" />
              <div className="absolute right-3 top-1/2 -translate-y-1/2">
                {isLoading ? <span className="text-cyan-400 animate-pulse">â³</span> : <span className="text-gray-400">ğŸ”</span>}
              </div>
              {showSuggestions && suggestions.length > 0 && (
                <div className="absolute z-50 w-full mt-1 bg-gray-900/95 backdrop-blur border border-gray-700 rounded-xl shadow-2xl overflow-hidden">
                  {suggestions.map((s, i) => (
                    <button key={s.siren} type="button" onClick={() => handleSelect(s)}
                      className={`w-full px-4 py-3 text-left transition ${i === selectedIndex ? 'bg-cyan-500/30' : 'hover:bg-cyan-500/20'}`}>
                      <div className="flex items-start gap-3">
                        <span className="text-xl mt-0.5">{s.isTransport ? 'ğŸš›' : 'ğŸ¢'}</span>
                        <div className="flex-1 min-w-0">
                          <p className="font-semibold text-sm text-white truncate">{s.name}</p>
                          <p className="text-xs text-gray-400 truncate">{s.activity}</p>
                          <p className="text-xs text-gray-500">{s.postcode} {s.city} Â· SIRET: {s.siret}</p>
                        </div>
                      </div>
                    </button>
                  ))}
                </div>
              )}
            </>
          ) : (
            <div className="p-4 bg-cyan-500/10 border border-cyan-500/30 rounded-xl animate-fadeIn">
              <div className="flex items-start justify-between gap-3">
                <div className="flex items-start gap-3 flex-1 min-w-0">
                  <span className="text-2xl">{selectedCompany.isTransport ? 'ğŸš›' : 'ğŸ¢'}</span>
                  <div className="min-w-0">
                    <p className="font-bold text-cyan-400 truncate">{selectedCompany.name}</p>
                    <p className="text-sm text-gray-300 truncate">{selectedCompany.activity}</p>
                    <p className="text-xs text-gray-500">{selectedCompany.postcode} {selectedCompany.city}</p>
                  </div>
                </div>
                <button type="button" onClick={clearSelection} className="p-1 text-gray-400 hover:text-white transition">âœ•</button>
              </div>
            </div>
          )}
          <input type="hidden" name="companyName" value={selectedCompany?.name || query} />
        </div>
      );
    };

    // â•â•â• SIRET VERIFIER (API SIRENE - GRATUIT) â•â•â•
    const SiretVerifier = () => {
      const [siret, setSiret] = React.useState('');
      const [status, setStatus] = React.useState('idle');
      const [company, setCompany] = React.useState(null);
      const debounceRef = React.useRef(null);

      const formatSiret = (val) => {
        const clean = val.replace(/\D/g, '').slice(0, 14);
        const parts = [];
        if (clean.length > 0) parts.push(clean.slice(0, 3));
        if (clean.length > 3) parts.push(clean.slice(3, 6));
        if (clean.length > 6) parts.push(clean.slice(6, 9));
        if (clean.length > 9) parts.push(clean.slice(9, 14));
        return parts.join(' ');
      };

      const verifySiret = async (cleanSiret) => {
        if (cleanSiret.length !== 14) { setStatus('idle'); setCompany(null); return; }
        setStatus('loading');
        try {
          const siren = cleanSiret.substring(0, 9);
          const response = await fetch(`https://recherche-entreprises.api.gouv.fr/search?q=${cleanSiret}&per_page=1`);
          if (response.ok) {
            const data = await response.json();
            const results = data.results || [];
            const match = results.find(r => r.siren === siren);
            if (match) {
              const s = match.siege || {};
              const companyData = {
                siret: cleanSiret,
                siren: match.siren,
                name: match.nom_complet || match.nom_raison_sociale || 'Non renseignÃ©',
                address: s.adresse || '',
                city: s.libelle_commune || '',
                postalCode: s.code_postal || '',
                activityCode: s.activite_principale || match.activite_principale || '',
                activity: s.libelle_activite_principale || match.libelle_activite_principale || ({'49.41A':'Transport routier de fret de proximitÃ©','49.41B':'Transport routier de fret interurbain','49.41C':'Location de camions avec chauffeur','49.42Z':'Services de dÃ©mÃ©nagement','52.29A':'Messagerie, fret express','52.29B':'AffrÃ¨tement et organisation des transports','53.20Z':'Autres activitÃ©s de poste et de courrier'}[s.activite_principale || match.activite_principale] || s.activite_principale || match.activite_principale || ''),
                active: s.etat_administratif === 'A'
              };
              setCompany(companyData);
              setStatus(companyData.active ? 'valid' : 'inactive');
              window.verifiedCompany = companyData;
            } else {
              setStatus('invalid'); setCompany(null);
            }
          } else { setStatus('error'); }
        } catch(e) { setStatus('error'); }
      };

      const handleChange = (e) => {
        const formatted = formatSiret(e.target.value);
        const clean = formatted.replace(/\s/g, '');
        setSiret(formatted);
        if (debounceRef.current) clearTimeout(debounceRef.current);
        debounceRef.current = setTimeout(() => verifySiret(clean), 500);
      };

      const borderColor = status === 'valid' ? 'border-green-500' : status === 'invalid' ? 'border-red-500' : status === 'inactive' ? 'border-orange-500' : 'border-gray-700';

      return (
        <div>
          <div className="relative">
            <input type="text" name="siret" value={siret} onChange={handleChange} placeholder="XXX XXX XXX XXXXX"
              className={`w-full bg-white/5 border ${borderColor} rounded-xl px-4 py-3 pr-10 transition focus:outline-none focus:ring-2 focus:ring-cyan-500/20`} />
            <div className="absolute right-3 top-1/2 -translate-y-1/2 text-lg">
              {status === 'loading' && <span className="text-cyan-400 animate-pulse">â³</span>}
              {status === 'valid' && <span className="text-green-400">âœ“</span>}
              {status === 'invalid' && <span className="text-red-400">âœ•</span>}
              {status === 'inactive' && <span className="text-orange-400">âš </span>}
              {status === 'error' && <span className="text-yellow-400">!</span>}
              {status === 'idle' && <span className="text-gray-400">ğŸ¢</span>}
            </div>
          </div>
          {company && status === 'valid' && (
            <div className="mt-3 p-4 bg-green-500/10 border border-green-500/30 rounded-xl animate-fadeIn">
              <div className="flex items-start gap-3">
                <span className="text-2xl">ğŸ¢</span>
                <div className="flex-1 min-w-0">
                  <p className="font-bold text-green-400">{company.name}</p>
                  <p className="text-sm text-gray-300">{company.address}</p>
                  <p className="text-sm text-gray-400">{company.postalCode} {company.city}</p>
                  {company.activity && <p className="text-xs text-gray-500 mt-1">ğŸ“‹ {company.activity}</p>}
                </div>
                <span className="px-2 py-1 bg-green-500/20 text-green-400 text-xs font-medium rounded-lg">âœ“ Actif</span>
              </div>
            </div>
          )}
          {status === 'invalid' && <p className="mt-2 text-sm text-red-400">âŒ Ce SIRET n'existe pas dans la base SIRENE</p>}
          {company && status === 'inactive' && <p className="mt-2 text-sm text-orange-400">âš ï¸ Cet Ã©tablissement n'est plus actif</p>}
        </div>
      );
    };

    // Mount
    const cc = document.getElementById('company-search-container');
    const sc = document.getElementById('siret-input-container');
    if (cc) ReactDOM.createRoot(cc).render(<CompanySearch />);
    if (sc) ReactDOM.createRoot(sc).render(<SiretVerifier />);
  </script>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FORM LOGIC â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <script>
    const API = window.location.origin + '/api';

    // Type selection
    document.querySelectorAll('.type-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.type-btn').forEach(b => { b.classList.remove('border-cyan-500'); b.classList.remove('border-amber-500'); });
        const type = btn.dataset.type;
        btn.classList.add(type === 'TRANSPORTEUR' ? 'border-cyan-500' : 'border-amber-500');
        document.getElementById('userRole').value = type;
        document.getElementById('vehiclesField').classList.toggle('hidden', type !== 'TRANSPORTEUR');
      });
    });

    // Form submission â†’ REAL FRETNOW API
    document.getElementById('registrationForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const form = new FormData(e.target);
      const data = Object.fromEntries(form);
      const errEl = document.getElementById('formError');
      const btn = document.getElementById('submitBtn');
      errEl.classList.add('hidden');

      // Validations
      if (!data.role) { errEl.textContent = 'Veuillez sÃ©lectionner votre type (Transporteur ou Chargeur)'; errEl.classList.remove('hidden'); return; }
      if (!data.firstName || !data.lastName) { errEl.textContent = 'Veuillez renseigner votre nom et prÃ©nom'; errEl.classList.remove('hidden'); return; }
      if (!data.email) { errEl.textContent = 'Veuillez renseigner votre email'; errEl.classList.remove('hidden'); return; }
      if (!data.password || data.password.length < 8) { errEl.textContent = 'Le mot de passe doit faire au moins 8 caractÃ¨res'; errEl.classList.remove('hidden'); return; }
      if (data.password !== data.passwordConfirm) { errEl.textContent = 'Les mots de passe ne correspondent pas'; errEl.classList.remove('hidden'); return; }

      const siretClean = (data.siret || '').replace(/\s/g, '');
      if (siretClean.length !== 14) { errEl.textContent = 'Veuillez renseigner un SIRET valide (14 chiffres)'; errEl.classList.remove('hidden'); return; }

      btn.textContent = 'CrÃ©ation en cours...';
      btn.disabled = true;

      try {
        const companyData = window.verifiedCompany || window.selectedCompany || {};
        const body = {
          email: data.email,
          password: data.password,
          firstName: data.firstName,
          lastName: data.lastName,
          phone: data.phone,
          role: data.role,
          company: {
            name: data.companyName || companyData.name || 'Mon entreprise',
            siren: siretClean.substring(0, 9),
            siret: siretClean,
            address: companyData.address || '',
            postalCode: companyData.postalCode || companyData.postcode || '',
            city: companyData.city || ''
          }
        };

        const res = await fetch(API + '/auth/register', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(body)
        });

        const result = await res.json();

        if (res.ok) {
          // Store auth data
          try {
            if (result.accessToken) localStorage.setItem('fn_token', result.accessToken);
            if (result.user) localStorage.setItem('fn_user', JSON.stringify(result.user));
            if (result.refreshToken) localStorage.setItem('fn_refresh', result.refreshToken);
          } catch(e) {}
          document.getElementById('registrationForm').classList.add('hidden');
          document.getElementById('successMessage').classList.remove('hidden');
          // Update success link based on role
          const role = result.user?.role;
          const link = document.querySelector('#successMessage a');
          if (link) {
            if (role === 'TRANSPORTEUR') link.href = '/transporteur.html';
            else if (role === 'CHARGEUR') link.href = '/chargeur.html';
            else link.href = '/app.html';
          }
        } else {
          errEl.textContent = result.error || result.message || 'Erreur lors de l\'inscription';
          errEl.classList.remove('hidden');
          btn.textContent = 'CrÃ©er mon compte gratuitement â†’';
          btn.disabled = false;
        }
      } catch(err) {
        errEl.textContent = 'Erreur de connexion au serveur. RÃ©essayez.';
        errEl.classList.remove('hidden');
        btn.textContent = 'CrÃ©er mon compte gratuitement â†’';
        btn.disabled = false;
      }
    });

    // Live counter
    setInterval(() => {
      document.getElementById('liveCount').textContent = Math.floor(Math.random()*8)+2;
    }, 8000);

    // Smooth scroll
    document.querySelectorAll('a[href^="#"]').forEach(a => {
      a.addEventListener('click', function(e) {
        e.preventDefault();
        const t = document.querySelector(this.getAttribute('href'));
        if (t) t.scrollIntoView({ behavior: 'smooth' });
      });
    });
  </script>

</body>
</html>
